#ifndef JCONNECTIONLISTENER_H
#define JCONNECTIONLISTENER_H

#include <gloox/connectionlistener.h>
#include "jcertinfo.h"

namespace Jabber
{

	class JAccount;
	struct JConnectionListenerPrivate;

	class JConnectionListener : public QObject, public gloox::ConnectionListener
	{
		Q_OBJECT
		public:
			JConnectionListener(JAccount *account);
			virtual ~JConnectionListener();

			virtual void onConnect();
			virtual void onDisconnect(gloox::ConnectionError error);
			virtual void onResourceBind(const std::string &resource);
			virtual void onResourceBindError(const gloox::Error *error);
			virtual void onSessionCreateError(const gloox::Error *error);
			virtual bool onTLSConnect(const gloox::CertInfo &info);
			virtual void onStreamEvent(gloox::StreamEvent event);
		private:
			JConnectionListenerPrivate *p;
	};
}

#endif // JCONNECTIONLISTENER_H
